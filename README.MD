# Program Check System

by doctorixx

# [RU]

Система, предназначеная для провреки программы на правильность с помощью тестов. (Как на Codeforces, Яндекс Контест)

Основное приминение - интергация со своими приложениями

### Сборка

```
mvn compile
mvn package
```

### Запуск

* Перейдите в директорию **target**.
* Там будет находится файл **ProgramCheckSystem-1.0-SNAPSHOT.jar**
* Запустите его

```
java -jar ProgramCheckSystem-1.0-SNAPSHOT.jar
```

## Взаимодействие

HTTP API

| Метод | Заголовки                      | Тело           | Адрес                      |
|-------|--------------------------------|----------------|----------------------------|
| POST  | Content-Type: application/json | (ПРИМЕР ВНИЗУ) | SERVER_ADDRESS/api/v1/test |

```
{
  "source": "a = int(input())\nb = int(input())\nprint(a + b)",
  "meta": "2",
  "compiler": "python",
  "tests": [
    {
      "in": "5\n1",
      "out": "6"
    },
    {
      "in": "5\n13",
      "out": "18"
    },
    {
      "in": "1000000\n1000000",
      "out": "2000000"
    },
    {
      "in": "-1\n1",
      "out": "0"
    },
    {
      "in": "50\n10",
      "out": "60"
    }
  ]
}
```

| Ключ     | Описание                                                                                                                 |
|----------|--------------------------------------------------------------------------------------------------------------------------|
| source   | Исходный код приложение                                                                                                  |
| compiler | Ключ компилятора (Задается в программе                                                                                   |
| meta     | Данные, которые вышлет сервер обратно после прохождения всех тестов (Лучше всего использовать для размещения id запроса) |
| tests    | Список тестов                                                                                                            |
| in       | Входные данные теста                                                                                                     |
| out      | Выходные данные теста                                                                                                    |

Ответ сервера

```
OK
```

### Callback-запрос
После прохождения всех тестов сервер отправит вердикт на указанный адрес

Пример callback`а
```
{
  "results": [
    {
      "success": false,
      "out": "Traceback (most recent call last):\n  File \"main.py\", line 1, in <module>\n    qs\nNameError: name 'qs' is not defined",
      "msg": "RUNTIME_ERROR",
      "time": 88
    },
    {
      "success": true,
      "out": "15",
      "msg": "SUCCESS",
      "time": 50
    },
    {
      "success": false,
      "out": "Traceback (most recent call last):\n  File \"main.py\", line 1, in <module>\n    qs\nNameError: name 'qs' is not defined",
      "msg": "RUNTIME_ERROR",
      "time": 46
    }
  ],
  "meta": "{\"champ_id\": 1, \"user_id\": 3, \"problem\": \"A\", \"id\": 88}"
}
```

| Ключ    | Описание                                                                                                                 |
|---------|--------------------------------------------------------------------------------------------------------------------------|
| results | Результаты                                                                                                               |
| success | Успешно или нет выполнение                                                                                               |
| out     | Вывод программы (Или ошибки)                                                                                             |
| msg     | Статус выполнения                                                                                                        |
| time    | Время выполнения теста (в мс)                                                                                            |
| meta    | Данные, которые вышлет сервер обратно после прохождения всех тестов (Лучше всего использовать для размещения id запроса) |


